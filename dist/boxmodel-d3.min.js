!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("d3")):"function"==typeof define&&define.amd?define(["d3"],n):"object"==typeof exports?exports["boxmodel-d3"]=n(require("d3")):t["boxmodel-d3"]=n(t.d3)}(window,function(t){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(n,e){n.exports=t},function(t,n,e){"use strict";e.r(n),e.d(n,"default",function(){return o});var r=e(0);function o(){var t,n,e,o,i,u,f,a,c=!1,l=[];function h(t){return t.eachAfter(d),t.eachBefore(p),t.eachBefore(y),t}function d(e){var h=a(e).width,d=a(e).height;if(t(e)){if(h=d=0,e.children){for(var p=function(t){var e=[],r=0,o=!1,u=0,a=!0;return t.children.forEach(function(l,h){n(l)&&!o&&(o=!0),r+=l.x1-l.x0,r+=a?c?i(l).left:0:Math.max(i(l).left,i(t.children[h-1]).right);var d=c?i(l).right:0;(r+d>f(t)||h===t.children.length-1)&&(r+=d),r>f(t)||h===t.children.length-1?(e.push({from:u,to:h,width:r,flexHeight:o}),h<t.children.length-1&&(u=h+1,r=0,o=!1,a=!0)):a=!1}),e}(e),y=0;y<p.length;y++)p[y].height=g(e,p,y);l.push({box:e,lines:p}),h+=r.max(p,function(t){return t.width}),d+=r.sum(p,function(t){return t.height})}h+=o(e).left+o(e).right,d+=o(e).top+o(e).bottom,h=Math.max(h,u(e).width),d=Math.max(d,u(e).height)}e.x0=e.y0=0,e.x1=h,e.y1=d}function p(e){var r=e.y1;if(e.parent&&n(e)){r=v(e).height;var o=x(e.parent),u=s(e,o);r-=c||0!==u?i(e).top:0;var f=(r-=c||u!==o.length-1?i(e).bottom:0)-e.y1;if(console.log("y1:"+e.y1+" h:"+r+" diff:"+f),t(e)&&e.children&&f>0){var a=x(e);console.log(a);var l=f/a.length,h=!0,d=!1,p=void 0;try{for(var y,g=a[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){y.value.height+=l}}catch(t){d=!0,p=t}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}}}e.y1=r}function y(t){var n=t.x1-t.x0,r=t.y1-t.y0;if(t.parent){t.y0=t.parent.y0+o(t.parent).top;var u=t.parent.children.indexOf(t);if(0===u||function(t){if(t.parent){var n=t.parent.children.indexOf(t),e=x(t.parent),r=e[s(t,e)];return r.from===n}return null}(t))t.x0+=t.parent.x0+o(t.parent).left,c&&(t.x0+=i(t).left);else{var f=t.parent.children[u-1];t.x0=f.x1,t.x0+=Math.max(i(f).right,i(t).left)}}else switch(e){case"top":t.y0=0;break;case"middle":t.y0=r/2;break;case"bottom":t.y0=r}switch(e){case"top":if(t.parent){var a=s(t);t.y0+=c||0!==a?i(t).top:0,t.y0+=m(t)}break;case"middle":t.parent&&(t.y0+=m(t)+v(t).height/2),t.y0-=r/2;break;case"bottom":if(t.parent){var l=x(t.parent),h=s(t,l);t.y0-=c||h!==l.length-1?i(t).bottom:0,t.y0+=m(t,!0)}t.y0-=r}t.x1=t.x0+n,t.y1=t.y0+r}function g(t,n,e){for(var r=n[e],o=0,u=r.from;u<=r.to;u++){var f=t.children[u],a=f.y1-f.y0,l=(c||0!==e?i(f).top:0)+(c||e!==n.length-1?i(f).bottom:0);a+l>o&&(o=a+l)}return o}function x(t){return l[l.findIndex(function(n){return n.box===t})].lines}function s(t,n){if(t.parent){var e=arguments.length>1?n:x(t.parent),r=t.parent.children.indexOf(t);return e.findIndex(function(t){return r>=t.from&&r<=t.to})}return null}function v(t){var n=x(t.parent);return n[s(t,n)]}function m(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.parent){var e=x(t.parent),o=s(t,e),i=n?o:o-1;return r.sum(e.filter(function(t,n){return n<=i}),function(t){return t.height})}return null}function b(t){return function(){return t}}return h.vAlign=function(t){return arguments.length?(e=t,h):e},h.edgeMargins=function(t){return arguments.length?(c=t,h):c},h.isContainer=function(n){return arguments.length?(t="function"==typeof n?n:b(+n),h):t},h.spanHeight=function(t){return arguments.length?(n="function"==typeof t?t:b(+t),h):n},h.padding=function(t){return arguments.length?(o="function"==typeof t?t:b(+t),h):o},h.margin=function(t){return arguments.length?(i="function"==typeof t?t:b(+t),h):i},h.nodeSize=function(t){return arguments.length?(a="function"==typeof t?t:b(+t),h):a},h.minContainerSize=function(t){return arguments.length?(u="function"==typeof t?t:b(+t),h):u},h.maxLineWidth=function(t){return arguments.length?(f="function"==typeof t?t:b(+t),h):f},h}}]).default});
//# sourceMappingURL=boxmodel-d3.min.js.map